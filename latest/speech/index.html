
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Python Client for Cloud Speech API (Beta) &#8212; google-cloud 75358e5 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Client for Cloud Speech API" href="gapic/v1/api.html" />
    <link rel="prev" title="Changelog" href="../spanner/changelog.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="python-client-for-cloud-speech-api-beta">
<h1>Python Client for Cloud Speech API (<a class="reference external" href="https://github.com/GoogleCloudPlatform/google-cloud-python/blob/master/README.rst">Beta</a>)<a class="headerlink" href="#python-client-for-cloud-speech-api-beta" title="Permalink to this headline">#</a></h1>
<p>The <a class="reference external" href="https://cloud.google.com/speech">Cloud Speech API</a> enables developers to convert audio to text by applying
powerful neural network models.  The API recognizes over 80 languages and
variants, to support your global user base.</p>
<ul class="simple">
<li><a class="reference external" href="https://googlecloudplatform.github.io/google-cloud-python/latest/speech/index.html">Client Library Documentation</a></li>
<li><a class="reference external" href="https://cloud.google.com/speech">Product Documentation</a></li>
</ul>
<div class="section" id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">#</a></h2>
<p>In order to use this library, you first need to go through the following steps:</p>
<ol class="arabic simple">
<li><a class="reference external" href="https://console.cloud.google.com/project">Select or create a Cloud Platform project.</a></li>
<li><a class="reference external" href="https://cloud.google.com/billing/docs/how-to/modify-project#enable_billing_for_a_project">Enable billing for your project.</a></li>
<li><a class="reference external" href="https://cloud.google.com/speech">Enable the Cloud Speech API.</a></li>
<li><a class="reference external" href="https://googlecloudplatform.github.io/google-cloud-python/stable/core/auth.html">Setup Authentication.</a></li>
</ol>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">#</a></h3>
<p>Install this library in a <a class="reference external" href="https://virtualenv.pypa.io/en/latest/">virtualenv</a> using pip. <a class="reference external" href="https://virtualenv.pypa.io/en/latest/">virtualenv</a> is a tool to
create isolated Python environments. The basic problem it addresses is one of
dependencies and versions, and indirectly permissions.</p>
<p>With <a class="reference external" href="https://virtualenv.pypa.io/en/latest/">virtualenv</a>, itâ€™s possible to install this library without needing system
install permissions, and without clashing with the installed system
dependencies.</p>
<div class="section" id="mac-linux">
<h4>Mac/Linux<a class="headerlink" href="#mac-linux" title="Permalink to this headline">#</a></h4>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install virtualenv</span>
<span class="go">virtualenv &lt;your-env&gt;</span>
<span class="go">source &lt;your-env&gt;/bin/activate</span>
<span class="go">&lt;your-env&gt;/bin/pip install google-cloud-speech</span>
</pre></div>
</div>
</div>
<div class="section" id="windows">
<h4>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">#</a></h4>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install virtualenv</span>
<span class="go">virtualenv &lt;your-env&gt;</span>
<span class="go">&lt;your-env&gt;\Scripts\activate</span>
<span class="go">&lt;your-env&gt;\Scripts\pip.exe install google-cloud-speech</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-usage">
<h3>Example Usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">#</a></h3>
<div class="code py highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">google.cloud</span> <span class="k">import</span> <span class="n">speech_v1</span>
<span class="kn">from</span> <span class="nn">google.cloud.speech_v1</span> <span class="k">import</span> <span class="n">enums</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">speech_v1</span><span class="o">.</span><span class="n">SpeechClient</span><span class="p">()</span>

<span class="n">encoding</span> <span class="o">=</span> <span class="n">enums</span><span class="o">.</span><span class="n">RecognitionConfig</span><span class="o">.</span><span class="n">AudioEncoding</span><span class="o">.</span><span class="n">FLAC</span>
<span class="n">sample_rate_hertz</span> <span class="o">=</span> <span class="mi">44100</span>
<span class="n">language_code</span> <span class="o">=</span> <span class="s1">&#39;en-US&#39;</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;encoding&#39;</span><span class="p">:</span> <span class="n">encoding</span><span class="p">,</span> <span class="s1">&#39;sample_rate_hertz&#39;</span><span class="p">:</span> <span class="n">sample_rate_hertz</span><span class="p">,</span> <span class="s1">&#39;language_code&#39;</span><span class="p">:</span> <span class="n">language_code</span><span class="p">}</span>
<span class="n">uri</span> <span class="o">=</span> <span class="s1">&#39;gs://bucket_name/file_name.flac&#39;</span>
<span class="n">audio</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;uri&#39;</span><span class="p">:</span> <span class="n">uri</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">recognize</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">audio</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="next-steps">
<h3>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li>Read the <a class="reference external" href="https://googlecloudplatform.github.io/google-cloud-python/latest/speech/index.html">Client Library Documentation</a> for Cloud Speech API
API to see other available methods on the client.</li>
<li>Read the <a class="reference external" href="https://cloud.google.com/speech">Product documentation</a> to learn
more about the product and see How-to Guides.
APIs that we cover.</li>
</ul>
</div>
</div>
<div class="section" id="using-the-library">
<h2>Using the Library<a class="headerlink" href="#using-the-library" title="Permalink to this headline">#</a></h2>
<div class="section" id="asynchronous-recognition">
<h3>Asynchronous Recognition<a class="headerlink" href="#asynchronous-recognition" title="Permalink to this headline">#</a></h3>
<p>The <a class="reference internal" href="gapic/v1/api.html#google.cloud.speech_v1.SpeechClient.long_running_recognize" title="google.cloud.speech_v1.SpeechClient.long_running_recognize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">long_running_recognize()</span></code></a> method
sends audio data to the Speech API and initiates a Long Running Operation.</p>
<p>Using this operation, you can periodically poll for recognition results.
Use asynchronous requests for audio data of any duration up to 80 minutes.</p>
<p>See: <a class="reference external" href="https://cloud.google.com/speech/reference/rest/v1beta1/speech/asyncrecognize">Speech Asynchronous Recognize</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">google.cloud</span> <span class="kn">import</span> <span class="n">speech</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client</span> <span class="o">=</span> <span class="n">speech</span><span class="o">.</span><span class="n">SpeechClient</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">operation</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">long_running_recognize</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">audio</span><span class="o">=</span><span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">RecognitionAudio</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">uri</span><span class="o">=</span><span class="s1">&#39;gs://my-bucket/recording.flac&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">config</span><span class="o">=</span><span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">RecognitionConfig</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;LINEAR16&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">language_code</span><span class="o">=</span><span class="s1">&#39;en-US&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">sample_rate_hertz</span><span class="o">=</span><span class="mi">44100</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">op_result</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">op_result</span><span class="o">.</span><span class="n">results</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">alternative</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">alternatives</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="n">alternative</span><span class="o">.</span><span class="n">transcript</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="n">alternative</span><span class="o">.</span><span class="n">confidence</span><span class="p">)</span>
<span class="go">====================</span>
<span class="go">&#39;how old is the Brooklyn Bridge&#39;</span>
<span class="go">0.98267895</span>
</pre></div>
</div>
</div>
<div class="section" id="synchronous-recognition">
<h3>Synchronous Recognition<a class="headerlink" href="#synchronous-recognition" title="Permalink to this headline">#</a></h3>
<p>The <a class="reference internal" href="gapic/v1/api.html#google.cloud.speech_v1.SpeechClient.recognize" title="google.cloud.speech_v1.SpeechClient.recognize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">recognize()</span></code></a> method converts speech
data to text and returns alternative text transcriptions.</p>
<p>This example uses <code class="docutils literal notranslate"><span class="pre">language_code='en-GB'</span></code> to better recognize a dialect from
Great Britain.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">google.cloud</span> <span class="kn">import</span> <span class="n">speech</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client</span> <span class="o">=</span> <span class="n">speech</span><span class="o">.</span><span class="n">SpeechClient</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">recognize</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">audio</span><span class="o">=</span><span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">RecognitionAudio</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">uri</span><span class="o">=</span><span class="s1">&#39;gs://my-bucket/recording.flac&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">config</span><span class="o">=</span><span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">RecognitionConfig</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;LINEAR16&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">language_code</span><span class="o">=</span><span class="s1">&#39;en-US&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">sample_rate_hertz</span><span class="o">=</span><span class="mi">44100</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">alternative</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">alternatives</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;transcript: &#39;</span> <span class="o">+</span> <span class="n">alternative</span><span class="o">.</span><span class="n">transcript</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;confidence: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">alternative</span><span class="o">.</span><span class="n">confidence</span><span class="p">))</span>
<span class="go">====================</span>
<span class="go">transcript: Hello, this is a test</span>
<span class="go">confidence: 0.81</span>
<span class="go">====================</span>
<span class="go">transcript: Hello, this is one test</span>
<span class="go">confidence: 0</span>
</pre></div>
</div>
<p>Example of using the profanity filter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">google.cloud</span> <span class="kn">import</span> <span class="n">speech</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client</span> <span class="o">=</span> <span class="n">speech</span><span class="o">.</span><span class="n">SpeechClient</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">recognize</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">audio</span><span class="o">=</span><span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">RecognitionAudio</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">uri</span><span class="o">=</span><span class="s1">&#39;gs://my-bucket/recording.flac&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">config</span><span class="o">=</span><span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">RecognitionConfig</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;LINEAR16&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">language_code</span><span class="o">=</span><span class="s1">&#39;en-US&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">profanity_filter</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">sample_rate_hertz</span><span class="o">=</span><span class="mi">44100</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">alternative</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">alternatives</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;transcript: &#39;</span> <span class="o">+</span> <span class="n">alternative</span><span class="o">.</span><span class="n">transcript</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;confidence: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">alternative</span><span class="o">.</span><span class="n">confidence</span><span class="p">))</span>
<span class="go">====================</span>
<span class="go">transcript: Hello, this is a f****** test</span>
<span class="go">confidence: 0.81</span>
</pre></div>
</div>
<p>Using speech context hints to get better results. This can be used to improve
the accuracy for specific words and phrases. This can also be used to add new
words to the vocabulary of the recognizer.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">google.cloud</span> <span class="kn">import</span> <span class="n">speech</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">google.cloud</span> <span class="kn">import</span> <span class="n">speech</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client</span> <span class="o">=</span> <span class="n">speech</span><span class="o">.</span><span class="n">SpeechClient</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">recognize</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">audio</span><span class="o">=</span><span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">RecognitionAudio</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">uri</span><span class="o">=</span><span class="s1">&#39;gs://my-bucket/recording.flac&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">config</span><span class="o">=</span><span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">RecognitionConfig</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;LINEAR16&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">language_code</span><span class="o">=</span><span class="s1">&#39;en-US&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">sample_rate_hertz</span><span class="o">=</span><span class="mi">44100</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">speech_contexts</span><span class="o">=</span><span class="p">[</span><span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">SpeechContext</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">phrases</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;hi&#39;</span><span class="p">,</span> <span class="s1">&#39;good afternoon&#39;</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">)],</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">alternative</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">alternatives</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;transcript: &#39;</span> <span class="o">+</span> <span class="n">alternative</span><span class="o">.</span><span class="n">transcript</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;confidence: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">alternative</span><span class="o">.</span><span class="n">confidence</span><span class="p">))</span>
<span class="go">====================</span>
<span class="go">transcript: Hello, this is a test</span>
<span class="go">confidence: 0.81</span>
</pre></div>
</div>
</div>
<div class="section" id="streaming-recognition">
<h3>Streaming Recognition<a class="headerlink" href="#streaming-recognition" title="Permalink to this headline">#</a></h3>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">streaming_recognize()</span></code> method converts
speech data to possible text alternatives on the fly.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Streaming recognition requests are limited to 1 minute of audio.</p>
<p class="last">See: <a class="reference external" href="https://cloud.google.com/speech/limits#content">https://cloud.google.com/speech/limits#content</a></p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">io</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">google.cloud</span> <span class="kn">import</span> <span class="n">speech</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client</span> <span class="o">=</span> <span class="n">speech</span><span class="o">.</span><span class="n">SpeechClient</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">RecognitionConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;LINEAR16&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">language_code</span><span class="o">=</span><span class="s1">&#39;en-US&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">sample_rate_hertz</span><span class="o">=</span><span class="mi">44100</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;./hello.wav&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">requests</span> <span class="o">=</span> <span class="p">[</span><span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">StreamingRecognizeRequest</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">audio_content</span><span class="o">=</span><span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
<span class="gp">... </span>    <span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">streaming_recognize</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">config</span><span class="o">=</span><span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">StreamingRecognitionConfig</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">requests</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">alternative</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">alternatives</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;transcript: &#39;</span> <span class="o">+</span> <span class="n">alternative</span><span class="o">.</span><span class="n">transcript</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;confidence: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">alternative</span><span class="o">.</span><span class="n">confidence</span><span class="p">))</span>
<span class="go">====================</span>
<span class="go">transcript: hello thank you for using Google Cloud platform</span>
<span class="go">confidence: 0.927983105183</span>
</pre></div>
</div>
<p>By default the API will perform continuous recognition
(continuing to process audio even if the speaker in the audio pauses speaking)
until the client closes the output stream or until the maximum time limit has
been reached.</p>
<p>If you only want to recognize a single utterance you can set
<code class="docutils literal notranslate"><span class="pre">single_utterance</span></code> to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a> and only one result will be returned.</p>
<p>See: <a class="reference external" href="https://cloud.google.com/speech/reference/rpc/google.cloud.speech.v1beta1#streamingrecognitionconfig">Single Utterance</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">io</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">google.cloud</span> <span class="kn">import</span> <span class="n">speech</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client</span> <span class="o">=</span> <span class="n">speech</span><span class="o">.</span><span class="n">SpeechClient</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">RecognitionConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;LINEAR16&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">language_code</span><span class="o">=</span><span class="s1">&#39;en-US&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">sample_rate_hertz</span><span class="o">=</span><span class="mi">44100</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;./hello-pause-goodbye.wav&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">requests</span> <span class="o">=</span> <span class="p">[</span><span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">StreamingRecognizeRequest</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">audio_content</span><span class="o">=</span><span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
<span class="gp">... </span>    <span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">streaming_recognize</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">config</span><span class="o">=</span><span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">StreamingRecognitionConfig</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">single_utterance</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">),</span>
<span class="gp">... </span>    <span class="n">requests</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">alternative</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">alternatives</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;transcript: &#39;</span> <span class="o">+</span> <span class="n">alternative</span><span class="o">.</span><span class="n">transcript</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;confidence: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">alternative</span><span class="o">.</span><span class="n">confidence</span><span class="p">))</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">alternative</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">alternatives</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;transcript: &#39;</span> <span class="o">+</span> <span class="n">alternative</span><span class="o">.</span><span class="n">transcript</span><span class="p">)</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;confidence: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">alternative</span><span class="o">.</span><span class="n">confidence</span><span class="p">))</span>
<span class="go">====================</span>
<span class="go">transcript: testing a pause</span>
<span class="go">confidence: 0.933770477772</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">interim_results</span></code> is set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>, interim results
(tentative hypotheses) may be returned as they become available.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">io</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">google.cloud</span> <span class="kn">import</span> <span class="n">speech</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client</span> <span class="o">=</span> <span class="n">speech</span><span class="o">.</span><span class="n">SpeechClient</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">RecognitionConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;LINEAR16&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">language_code</span><span class="o">=</span><span class="s1">&#39;en-US&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">sample_rate_hertz</span><span class="o">=</span><span class="mi">44100</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;./hello.wav&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">requests</span> <span class="o">=</span> <span class="p">[</span><span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">StreamingRecognizeRequest</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">audio_content</span><span class="o">=</span><span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
<span class="gp">... </span>    <span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">speech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">StreamingRecognitionConfig</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">responses</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">streaming_recognize</span><span class="p">(</span><span class="n">config</span><span class="p">,</span><span class="n">requests</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">response</span> <span class="ow">in</span> <span class="n">responses</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">alternative</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">alternatives</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;transcript: &#39;</span> <span class="o">+</span> <span class="n">alternative</span><span class="o">.</span><span class="n">transcript</span><span class="p">)</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;confidence: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">alternative</span><span class="o">.</span><span class="n">confidence</span><span class="p">))</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;is_final:&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">is_final</span><span class="p">))</span>
<span class="go">====================</span>
<span class="go">&#39;he&#39;</span>
<span class="go">None</span>
<span class="go">False</span>
<span class="go">====================</span>
<span class="go">&#39;hell&#39;</span>
<span class="go">None</span>
<span class="go">False</span>
<span class="go">====================</span>
<span class="go">&#39;hello&#39;</span>
<span class="go">0.973458576</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">#</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="gapic/v1/api.html">Client for Cloud Speech API</a></li>
<li class="toctree-l1"><a class="reference internal" href="gapic/v1/types.html">Types for Cloud Speech API Client</a></li>
</ul>
</div>
<p>A new beta release, spelled <code class="docutils literal notranslate"><span class="pre">v1p1beta1</span></code>, is provided to provide for preview
of upcoming features. In order to use this, you will want to import from
<code class="docutils literal notranslate"><span class="pre">google.cloud.speech_v1p1beta1</span></code> in lieu of <code class="docutils literal notranslate"><span class="pre">google.cloud.speech</span></code>.</p>
<p>An API and type reference is provided the first beta also:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="gapic/v1p1beta1/api.html">Client for Cloud Speech API</a></li>
<li class="toctree-l1"><a class="reference internal" href="gapic/v1p1beta1/types.html">Types for Cloud Speech API Client</a></li>
</ul>
</div>
</div>
<div class="section" id="changelog">
<h2>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">#</a></h2>
<p>For a list of all <code class="docutils literal notranslate"><span class="pre">google-cloud-speech</span></code> releases:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#">0.36.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#">0.35.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#">0.34.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#">0.33.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#">0.32.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#">0.31.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#">0.31.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#">0.30.0</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">google-cloud</a></h1>



<p class="blurb">Google Cloud Client Libraries for Python</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=GoogleCloudPlatform&repo=google-cloud-python&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../core/index.html">Core Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../asset/index.html">Asset Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../automl/index.html">AutoML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bigquery/index.html">BigQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bigquery_datatransfer/index.html">BigQuery Data-Transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bigtable/index.html">Bigtable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../container/index.html">Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dataproc/index.html">Dataproc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datastore/index.html">Datastore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dlp/index.html">Data Loss Prevention</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dns/index.html">DNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../firestore/index.html">Firestore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iot/index.html">IoT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kms/index.html">Key Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/index.html">Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pubsub/index.html">PubSub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oslogin/index.html">OSLogin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../redis/index.html">Redis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resource-manager/index.html">Resource Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../runtimeconfig/index.html">Python Client for Google Cloud RuntimeConfig</a></li>
<li class="toctree-l1"><a class="reference internal" href="../runtimeconfig/index.html#api-reference">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../websecurityscanner/index.html">Security Scanner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spanner/index.html">Spanner</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Speech</a></li>
<li class="toctree-l1"><a class="reference internal" href="../storage/index.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tasks/index.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../texttospeech/index.html">Text-to-Speech</a></li>
<li class="toctree-l1"><a class="reference internal" href="../translate/index.html">Translate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vision/index.html">Vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videointelligence/index.html">Video Intelligence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../error-reporting/usage.html">Stackdriver Error Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logging/index.html">Stackdriver Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring/index.html">Stackdriver Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Stackdriver Trace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Release History</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../spanner/changelog.html" title="previous chapter">Changelog</a></li>
      <li>Next: <a href="gapic/v1/api.html" title="next chapter">Client for Cloud Speech API</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014-2017, Google.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/speech/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/GoogleCloudPlatform/google-cloud-python" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>