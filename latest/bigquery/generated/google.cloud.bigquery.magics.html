
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>google.cloud.bigquery.magics &#8212; google-cloud eb258ec documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="google.cloud.bigquery.magics.Context" href="google.cloud.bigquery.magics.Context.html" />
    <link rel="prev" title="google.cloud.bigquery.external_config.GoogleSheetsOptions.skip_leading_rows" href="google.cloud.bigquery.external_config.GoogleSheetsOptions.skip_leading_rows.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-google.cloud.bigquery.magics">
<span id="google-cloud-bigquery-magics"></span><h1>google.cloud.bigquery.magics<a class="headerlink" href="#module-google.cloud.bigquery.magics" title="Permalink to this headline">#</a></h1>
<p>IPython Magics</p>
<dl class="function">
<dt>
<code class="descname">%%bigquery</code></dt>
<dd><p>IPython cell magic to run a query and display the result as a DataFrame</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="n">bigquery</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">destination_var</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">project</span> <span class="o">&lt;</span><span class="n">project</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">use_legacy_sql</span><span class="p">]</span>
           <span class="p">[</span><span class="o">--</span><span class="n">verbose</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">query</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Parameters:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">&lt;destination_var&gt;</span></code> (optional, line argument):</dt>
<dd>variable to store the query results.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--project</span> <span class="pre">&lt;project&gt;</span></code> (optional, line argument):</dt>
<dd>Project to use for running the query. Defaults to the context
<a class="reference internal" href="google.cloud.bigquery.magics.Context.project.html#google.cloud.bigquery.magics.Context.project" title="google.cloud.bigquery.magics.Context.project"><code class="xref py py-attr docutils literal notranslate"><span class="pre">project</span></code></a>.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--use_legacy_sql</span></code> (optional, line argument):</dt>
<dd>Runs the query using Legacy SQL syntax. Defaults to Standard SQL if
this argument not used.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">--verbose</span></code> (optional, line argument):</dt>
<dd>If this flag is used, information including the query job ID and the
amount of time for the query to complete will not be cleared after the
query is finished. By default, this information will be displayed but
will be cleared after the query is finished.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">&lt;query&gt;</span></code> (required, cell argument):</dt>
<dd>SQL query to run.</dd>
</dl>
</li>
</ul>
<dl class="docutils">
<dt>Returns:</dt>
<dd>A <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.23.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a> with the query results.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All queries run using this magic will run using the context
<a class="reference internal" href="google.cloud.bigquery.magics.Context.credentials.html#google.cloud.bigquery.magics.Context.credentials" title="google.cloud.bigquery.magics.Context.credentials"><code class="xref py py-attr docutils literal notranslate"><span class="pre">credentials</span></code></a>.</p>
</div>
<dl class="docutils">
<dt>Examples:</dt>
<dd>The following examples can be run in an IPython notebook after loading
the bigquery IPython extension (see <code class="docutils literal notranslate"><span class="pre">In[1]</span></code>) and setting up
Application Default Credentials.</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="o">%</span><span class="n">load_ext</span> <span class="n">google</span><span class="o">.</span><span class="n">cloud</span><span class="o">.</span><span class="n">bigquery</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="o">%%</span><span class="n">bigquery</span>
   <span class="o">...</span><span class="p">:</span> <span class="n">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">SUM</span><span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="k">as</span> <span class="n">count</span>
   <span class="o">...</span><span class="p">:</span> <span class="n">FROM</span> <span class="sb">`bigquery-public-data.usa_names.usa_1910_current`</span>
   <span class="o">...</span><span class="p">:</span> <span class="n">GROUP</span> <span class="n">BY</span> <span class="n">name</span>
   <span class="o">...</span><span class="p">:</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">count</span> <span class="n">DESC</span>
   <span class="o">...</span><span class="p">:</span> <span class="n">LIMIT</span> <span class="mi">3</span>

<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>       <span class="n">name</span>    <span class="n">count</span>
   <span class="o">...</span><span class="p">:</span> <span class="o">-------------------</span>
   <span class="o">...</span><span class="p">:</span> <span class="mi">0</span>    <span class="n">James</span>  <span class="mi">4987296</span>
   <span class="o">...</span><span class="p">:</span> <span class="mi">1</span>     <span class="n">John</span>  <span class="mi">4866302</span>
   <span class="o">...</span><span class="p">:</span> <span class="mi">2</span>   <span class="n">Robert</span>  <span class="mi">4738204</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="o">%%</span><span class="n">bigquery</span> <span class="n">df</span> <span class="o">--</span><span class="n">project</span> <span class="n">my</span><span class="o">-</span><span class="n">alternate</span><span class="o">-</span><span class="n">project</span> <span class="o">--</span><span class="n">verbose</span>
   <span class="o">...</span><span class="p">:</span> <span class="n">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">SUM</span><span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="k">as</span> <span class="n">count</span>
   <span class="o">...</span><span class="p">:</span> <span class="n">FROM</span> <span class="sb">`bigquery-public-data.usa_names.usa_1910_current`</span>
   <span class="o">...</span><span class="p">:</span> <span class="n">WHERE</span> <span class="n">gender</span> <span class="o">=</span> <span class="s1">&#39;F&#39;</span>
   <span class="o">...</span><span class="p">:</span> <span class="n">GROUP</span> <span class="n">BY</span> <span class="n">name</span>
   <span class="o">...</span><span class="p">:</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">count</span> <span class="n">DESC</span>
   <span class="o">...</span><span class="p">:</span> <span class="n">LIMIT</span> <span class="mi">3</span>
<span class="n">Executing</span> <span class="n">query</span> <span class="k">with</span> <span class="n">job</span> <span class="n">ID</span><span class="p">:</span> <span class="n">bf633912</span><span class="o">-</span><span class="n">af2c</span><span class="o">-</span><span class="mi">4780</span><span class="o">-</span><span class="n">b568</span><span class="o">-</span><span class="mi">5</span><span class="n">d868058632b</span>
<span class="n">Query</span> <span class="n">executing</span><span class="p">:</span> <span class="mf">2.61</span><span class="n">s</span>
<span class="n">Query</span> <span class="n">complete</span> <span class="n">after</span> <span class="mf">2.92</span><span class="n">s</span>

<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>          <span class="n">name</span>    <span class="n">count</span>
   <span class="o">...</span><span class="p">:</span> <span class="o">----------------------</span>
   <span class="o">...</span><span class="p">:</span> <span class="mi">0</span>        <span class="n">Mary</span>  <span class="mi">3736239</span>
   <span class="o">...</span><span class="p">:</span> <span class="mi">1</span>    <span class="n">Patricia</span>  <span class="mi">1568495</span>
   <span class="o">...</span><span class="p">:</span> <span class="mi">2</span>   <span class="n">Elizabeth</span>  <span class="mi">1519946</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">df</span>

<span class="n">Out</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>          <span class="n">name</span>    <span class="n">count</span>
   <span class="o">...</span><span class="p">:</span> <span class="o">----------------------</span>
   <span class="o">...</span><span class="p">:</span> <span class="mi">0</span>        <span class="n">Mary</span>  <span class="mi">3736239</span>
   <span class="o">...</span><span class="p">:</span> <span class="mi">1</span>    <span class="n">Patricia</span>  <span class="mi">1568495</span>
   <span class="o">...</span><span class="p">:</span> <span class="mi">2</span>   <span class="n">Elizabeth</span>  <span class="mi">1519946</span>
</pre></div>
</div>
</dd></dl>

<p class="rubric">Classes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="google.cloud.bigquery.magics.Context.html#google.cloud.bigquery.magics.Context" title="google.cloud.bigquery.magics.Context"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Context</span></code></a>()</td>
<td>Storage for objects to be used throughout an IPython notebook session.</td>
</tr>
</tbody>
</table>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">google-cloud</a></h1>



<p class="blurb">Google Cloud Client Libraries for Python</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=GoogleCloudPlatform&repo=google-cloud-python&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../releases.html"><code class="docutils literal notranslate"><span class="pre">google-cloud</span></code> Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core/index.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../automl/index.html">Python Client for Cloud AutoML API (Alpha)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../usage.html">BigQuery</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../reference.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbapi.html">DB-API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#authentication-configuration">Authentication / Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#projects">Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#datasets">Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#tables">Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#queries">Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#list-jobs-for-a-project">List jobs for a project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#using-bigquery-with-pandas">Using BigQuery with Pandas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage.html#changelog">Changelog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../bigquery_datatransfer/index.html">Python Client for BigQuery Data Transfer API (Alpha)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bigtable/usage.html">Bigtable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../container/index.html">Python Client for Google Container Engine API (Beta)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dataproc/index.html">Python Client for Google Cloud Dataproc API (Alpha)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datastore/usage.html">Datastore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dlp/index.html">Python Client for Cloud Data Loss Prevention (DLP) API (Alpha)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dns/usage.html">DNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../firestore/index.html">Firestore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../iot/index.html">Python Client for Cloud IoT API (Alpha)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kms/index.html">Python Client for Google Cloud Key Management Service (KMS) API (Alpha)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language/usage.html">Natural Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pubsub/index.html">Pub/Sub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../oslogin/index.html">Python Client for Google Cloud OS Login API (Alpha)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resource-manager/api.html">Resource Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resource-manager/api.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resource-manager/api.html#usage">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../runtimeconfig/usage.html">Runtimeconfig</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spanner/usage.html">Spanner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../speech/index.html">Speech</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../error-reporting/usage.html">Stackdriver Error Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../monitoring/index.html">Python Client for Stackdriver Monitoring API (Alpha)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../logging/usage.html">Stackdriver Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../redis/index.html">Python Client for Google Cloud Memorystore for Redis API (Alpha)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../storage/client.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tasks/index.html">Python Client for Cloud Tasks API (Alpha)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../texttospeech/index.html">Python Client for Cloud Text-to-Speech API (Alpha)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../translate/usage.html">Translation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vision/index.html">Vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../videointelligence/index.html">Video Intelligence</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../usage.html">BigQuery</a><ul>
  <li><a href="../reference.html">API Reference</a><ul>
      <li>Previous: <a href="google.cloud.bigquery.external_config.GoogleSheetsOptions.skip_leading_rows.html" title="previous chapter">google.cloud.bigquery.external_config.GoogleSheetsOptions.skip_leading_rows</a></li>
      <li>Next: <a href="google.cloud.bigquery.magics.Context.html" title="next chapter">google.cloud.bigquery.magics.Context</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014-2017, Google.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="../../_sources/bigquery/generated/google.cloud.bigquery.magics.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/GoogleCloudPlatform/google-cloud-python" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>