
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Queries &#8212; google-cloud f591b8e documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Batches" href="batch.html" />
    <link rel="prev" title="Field Paths" href="field_path.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-google.cloud.firestore_v1beta1.query">
<span id="queries"></span><h1>Queries<a class="headerlink" href="#module-google.cloud.firestore_v1beta1.query" title="Permalink to this headline">#</a></h1>
<p>Classes for representing queries for the Google Cloud Firestore API.</p>
<p>A <a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query" title="google.cloud.firestore_v1beta1.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> can be created directly from
a <code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code> and that can be
a more common way to create a query than direct usage of the constructor.</p>
<dl class="class">
<dt id="google.cloud.firestore_v1beta1.query.Query">
<em class="property">class </em><code class="descclassname">google.cloud.firestore_v1beta1.query.</code><code class="descname">Query</code><span class="sig-paren">(</span><em>parent</em>, <em>projection=None</em>, <em>field_filters=()</em>, <em>orders=()</em>, <em>limit=None</em>, <em>offset=None</em>, <em>start_at=None</em>, <em>end_at=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/cloud/firestore_v1beta1/query.html#Query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.firestore_v1beta1.query.Query" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Represents a query to the Firestore API.</p>
<p>Instances of this class are considered immutable: all methods that
would modify an instance instead return a new instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>parent</strong> (<em>Collection</em>) – The collection
that this query applies to.</li>
<li><strong>projection</strong> (<em>Optional</em><em>[</em><em>google.cloud.proto.firestore.v1beta1.            query_pb2.StructuredQuery.Projection</em><em>]</em>) – A projection of document
fields to limit the query results to.</li>
<li><strong>field_filters</strong> (<em>Optional</em><em>[</em><em>Tuple</em><em>[</em><em>google.cloud.proto.firestore.v1beta1.            query_pb2.StructuredQuery.FieldFilter</em><em>, </em><em>..</em><em>]</em><em>]</em>) – The filters to be
applied in the query.</li>
<li><strong>orders</strong> (<em>Optional</em><em>[</em><em>Tuple</em><em>[</em><em>google.cloud.proto.firestore.v1beta1.            query_pb2.StructuredQuery.Order</em><em>, </em><em>..</em><em>]</em><em>]</em>) – The “order by” entries
to use in the query.</li>
<li><strong>limit</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – The maximum number of documents the
query is allowed to return.</li>
<li><strong>offset</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – The number of results to skip.</li>
<li><strong>start_at</strong> (<em>Optional</em><em>[</em><em>Tuple</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>]</em><em>]</em>) – <p>Two-tuple of</p>
<ul>
<li>a mapping of fields. Any field that is present in this mapping
must also be present in <code class="docutils literal notranslate"><span class="pre">orders</span></code></li>
<li>an <code class="docutils literal notranslate"><span class="pre">after</span></code> flag</li>
</ul>
<p>The fields and the flag combine to form a cursor used as
a starting point in a query result set. If the <code class="docutils literal notranslate"><span class="pre">after</span></code>
flag is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>, the results will start just after any
documents which have fields matching the cursor, otherwise
any matching documents will be included in the result set.
When the query is formed, the document values
will be used in the order given by <code class="docutils literal notranslate"><span class="pre">orders</span></code>.</p>
</li>
<li><strong>end_at</strong> (<em>Optional</em><em>[</em><em>Tuple</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>]</em><em>]</em>) – <p>Two-tuple of</p>
<ul>
<li>a mapping of fields. Any field that is present in this mapping
must also be present in <code class="docutils literal notranslate"><span class="pre">orders</span></code></li>
<li>a <code class="docutils literal notranslate"><span class="pre">before</span></code> flag</li>
</ul>
<p>The fields and the flag combine to form a cursor used as
an ending point in a query result set. If the <code class="docutils literal notranslate"><span class="pre">before</span></code>
flag is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>, the results will end just before any
documents which have fields matching the cursor, otherwise
any matching documents will be included in the result set.
When the query is formed, the document values
will be used in the order given by <code class="docutils literal notranslate"><span class="pre">orders</span></code>.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="google.cloud.firestore_v1beta1.query.Query.ASCENDING">
<code class="descname">ASCENDING</code><em class="property"> = 'ASCENDING'</em><a class="headerlink" href="#google.cloud.firestore_v1beta1.query.Query.ASCENDING" title="Permalink to this definition">#</a></dt>
<dd><p>Sort query results in ascending order on a field.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="google.cloud.firestore_v1beta1.query.Query.DESCENDING">
<code class="descname">DESCENDING</code><em class="property"> = 'DESCENDING'</em><a class="headerlink" href="#google.cloud.firestore_v1beta1.query.Query.DESCENDING" title="Permalink to this definition">#</a></dt>
<dd><p>Sort query results in descending order on a field.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.firestore_v1beta1.query.Query.end_at">
<code class="descname">end_at</code><span class="sig-paren">(</span><em>document_fields</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/cloud/firestore_v1beta1/query.html#Query.end_at"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.firestore_v1beta1.query.Query.end_at" title="Permalink to this definition">#</a></dt>
<dd><p>End query results at a particular document value.</p>
<p>The result set will <strong>include</strong> the document specified by
<code class="docutils literal notranslate"><span class="pre">document_fields</span></code>.</p>
<p>If the current query already has specified an end cursor – either
via this method or
<a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query.end_before" title="google.cloud.firestore_v1beta1.query.Query.end_before"><code class="xref py py-meth docutils literal notranslate"><span class="pre">end_before()</span></code></a> – this will
overwrite it.</p>
<p>When the query is sent to the server, the <code class="docutils literal notranslate"><span class="pre">document_fields</span></code> will
be used in the order given by fields set by
<a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query.order_by" title="google.cloud.firestore_v1beta1.query.Query.order_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">order_by()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>document_fields</strong> (<em>Union</em><em>[</em><em>DocumentSnapshot</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a><em>]</em>) – a document
snapshot or a dictionary/list/tuple of fields representing a
query results cursor. A cursor is a collection of values that
represent a position in a query result set.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A query with cursor. Acts as
a copy of the current query, modified with the newly added
“end at” cursor.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Query</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.firestore_v1beta1.query.Query.end_before">
<code class="descname">end_before</code><span class="sig-paren">(</span><em>document_fields</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/cloud/firestore_v1beta1/query.html#Query.end_before"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.firestore_v1beta1.query.Query.end_before" title="Permalink to this definition">#</a></dt>
<dd><p>End query results before a particular document value.</p>
<p>The result set will <strong>exclude</strong> the document specified by
<code class="docutils literal notranslate"><span class="pre">document_fields</span></code>.</p>
<p>If the current query already has specified an end cursor – either
via this method or
<a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query.end_at" title="google.cloud.firestore_v1beta1.query.Query.end_at"><code class="xref py py-meth docutils literal notranslate"><span class="pre">end_at()</span></code></a> – this will
overwrite it.</p>
<p>When the query is sent to the server, the <code class="docutils literal notranslate"><span class="pre">document_fields</span></code> will
be used in the order given by fields set by
<a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query.order_by" title="google.cloud.firestore_v1beta1.query.Query.order_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">order_by()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>document_fields</strong> (<em>Union</em><em>[</em><em>DocumentSnapshot</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a><em>]</em>) – a document
snapshot or a dictionary/list/tuple of fields representing a
query results cursor. A cursor is a collection of values that
represent a position in a query result set.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A query with cursor. Acts as
a copy of the current query, modified with the newly added
“end before” cursor.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Query</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.firestore_v1beta1.query.Query.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>transaction=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/cloud/firestore_v1beta1/query.html#Query.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.firestore_v1beta1.query.Query.get" title="Permalink to this definition">#</a></dt>
<dd><p>Read the documents in the collection that match this query.</p>
<p>This sends a <code class="docutils literal notranslate"><span class="pre">RunQuery</span></code> RPC and then returns an iterator which
consumes each document returned in the stream of <code class="docutils literal notranslate"><span class="pre">RunQueryResponse</span></code>
messages.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The underlying stream of responses will time out after
the <code class="docutils literal notranslate"><span class="pre">max_rpc_timeout_millis</span></code> value set in the GAPIC
client configuration for the <code class="docutils literal notranslate"><span class="pre">RunQuery</span></code> API.  Snapshots
not consumed from the iterator before that point will be lost.</p>
</div>
<p>If a <code class="docutils literal notranslate"><span class="pre">transaction</span></code> is used and it already has write operations
added, this method cannot be used (i.e. read-after-write is not
allowed).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>transaction</strong> (<em>Optional</em><em>[</em><em>                Transaction</em><em>]</em>) – An existing transaction that this query will
run in.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><p class="first"><em>~.firestore_v1beta1.document.DocumentSnapshot</em> – The next
document that fulfills the query.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – If the first response in the stream is empty, but
then more responses follow.</li>
<li><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – If a response other than the first does not contain
a document.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.firestore_v1beta1.query.Query.limit">
<code class="descname">limit</code><span class="sig-paren">(</span><em>count</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/cloud/firestore_v1beta1/query.html#Query.limit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.firestore_v1beta1.query.Query.limit" title="Permalink to this definition">#</a></dt>
<dd><p>Limit a query to return a fixed number of results.</p>
<p>If the current query already has a limit set, this will overwrite it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>count</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Maximum number of documents to return that match
the query.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A limited query. Acts as a
copy of the current query, modified with the newly added
“limit” filter.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Query</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.firestore_v1beta1.query.Query.offset">
<code class="descname">offset</code><span class="sig-paren">(</span><em>num_to_skip</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/cloud/firestore_v1beta1/query.html#Query.offset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.firestore_v1beta1.query.Query.offset" title="Permalink to this definition">#</a></dt>
<dd><p>Skip to an offset in a query.</p>
<p>If the current query already has specified an offset, this will
overwrite it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>num_to_skip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The number of results to skip at the beginning
of query results. (Must be non-negative.)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">An offset query. Acts as a
copy of the current query, modified with the newly added
“offset” field.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Query</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.firestore_v1beta1.query.Query.on_snapshot">
<code class="descname">on_snapshot</code><span class="sig-paren">(</span><em>callback</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/cloud/firestore_v1beta1/query.html#Query.on_snapshot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.firestore_v1beta1.query.Query.on_snapshot" title="Permalink to this definition">#</a></dt>
<dd><p>Monitor the documents in this collection that match this query.</p>
<p>This starts a watch on this query using a background thread. The
provided callback is run on the snapshot of the documents.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>callback</strong> (<em>QuerySnapshot</em>) – a callback to run when
a change occurs.</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>from google.cloud import firestore</p>
<p>db = firestore.Client()
query_ref = db.collection(u’users’).where(“user”, “==”, u’Ada’)</p>
<dl class="docutils">
<dt>def on_snapshot(query_snapshot):</dt>
<dd><dl class="first last docutils">
<dt>for doc in query_snapshot.documents:</dt>
<dd>print(u’{} =&gt; {}’.format(doc.id, doc.to_dict()))</dd>
</dl>
</dd>
</dl>
<p># Watch this query
query_watch = query_ref.on_snapshot(on_snapshot)</p>
<p># Terminate this watch
query_watch.unsubscribe()</p>
</dd></dl>

<dl class="method">
<dt id="google.cloud.firestore_v1beta1.query.Query.order_by">
<code class="descname">order_by</code><span class="sig-paren">(</span><em>field_path</em>, <em>direction='ASCENDING'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/cloud/firestore_v1beta1/query.html#Query.order_by"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.firestore_v1beta1.query.Query.order_by" title="Permalink to this definition">#</a></dt>
<dd><p>Modify the query to add an order clause on a specific field.</p>
<p>See <a class="reference internal" href="client.html#google.cloud.firestore_v1beta1.client.Client.field_path" title="google.cloud.firestore_v1beta1.client.Client.field_path"><code class="xref py py-meth docutils literal notranslate"><span class="pre">field_path()</span></code></a> for
more information on <strong>field paths</strong>.</p>
<p>Successive <a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query.order_by" title="google.cloud.firestore_v1beta1.query.Query.order_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">order_by()</span></code></a> calls
will further refine the ordering of results returned by the query
(i.e. the new “order by” fields will be added to existing ones).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>field_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – A field path (<code class="docutils literal notranslate"><span class="pre">.</span></code>-delimited list of
field names) on which to order the query results.</li>
<li><strong>direction</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The direction to order by. Must be one
of <a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query.ASCENDING" title="google.cloud.firestore_v1beta1.query.Query.ASCENDING"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ASCENDING</span></code></a> or <a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query.DESCENDING" title="google.cloud.firestore_v1beta1.query.Query.DESCENDING"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DESCENDING</span></code></a>, defaults to
<a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query.ASCENDING" title="google.cloud.firestore_v1beta1.query.Query.ASCENDING"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ASCENDING</span></code></a>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">An ordered query. Acts as a
copy of the current query, modified with the newly added
“order by” constraint.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">Query</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – If <code class="docutils literal notranslate"><span class="pre">field_path</span></code> is invalid.</li>
<li><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – If <code class="docutils literal notranslate"><span class="pre">direction</span></code> is not one of <a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query.ASCENDING" title="google.cloud.firestore_v1beta1.query.Query.ASCENDING"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ASCENDING</span></code></a> or
<a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query.DESCENDING" title="google.cloud.firestore_v1beta1.query.Query.DESCENDING"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DESCENDING</span></code></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.firestore_v1beta1.query.Query.select">
<code class="descname">select</code><span class="sig-paren">(</span><em>field_paths</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/cloud/firestore_v1beta1/query.html#Query.select"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.firestore_v1beta1.query.Query.select" title="Permalink to this definition">#</a></dt>
<dd><p>Project documents matching query to a limited set of fields.</p>
<p>See <a class="reference internal" href="client.html#google.cloud.firestore_v1beta1.client.Client.field_path" title="google.cloud.firestore_v1beta1.client.Client.field_path"><code class="xref py py-meth docutils literal notranslate"><span class="pre">field_path()</span></code></a> for
more information on <strong>field paths</strong>.</p>
<p>If the current query already has a projection set (i.e. has already
called <a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query.select" title="google.cloud.firestore_v1beta1.query.Query.select"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select()</span></code></a>), this
will overwrite it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>field_paths</strong> (<em>Iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>..</em><em>]</em>) – An iterable of field paths
(<code class="docutils literal notranslate"><span class="pre">.</span></code>-delimited list of field names) to use as a projection
of document fields in the query results.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A “projected” query. Acts as
a copy of the current query, modified with the newly added
projection.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Query</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – If any <code class="docutils literal notranslate"><span class="pre">field_path</span></code> is invalid.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.firestore_v1beta1.query.Query.start_after">
<code class="descname">start_after</code><span class="sig-paren">(</span><em>document_fields</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/cloud/firestore_v1beta1/query.html#Query.start_after"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.firestore_v1beta1.query.Query.start_after" title="Permalink to this definition">#</a></dt>
<dd><p>Start query results after a particular document value.</p>
<p>The result set will <strong>exclude</strong> the document specified by
<code class="docutils literal notranslate"><span class="pre">document_fields</span></code>.</p>
<p>If the current query already has specified a start cursor – either
via this method or
<a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query.start_at" title="google.cloud.firestore_v1beta1.query.Query.start_at"><code class="xref py py-meth docutils literal notranslate"><span class="pre">start_at()</span></code></a> – this will
overwrite it.</p>
<p>When the query is sent to the server, the <code class="docutils literal notranslate"><span class="pre">document_fields</span></code> will
be used in the order given by fields set by
<a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query.order_by" title="google.cloud.firestore_v1beta1.query.Query.order_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">order_by()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>document_fields</strong> (<em>Union</em><em>[</em><em>DocumentSnapshot</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a><em>]</em>) – a document
snapshot or a dictionary/list/tuple of fields representing a
query results cursor. A cursor is a collection of values that
represent a position in a query result set.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A query with cursor. Acts as
a copy of the current query, modified with the newly added
“start after” cursor.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Query</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.firestore_v1beta1.query.Query.start_at">
<code class="descname">start_at</code><span class="sig-paren">(</span><em>document_fields</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/cloud/firestore_v1beta1/query.html#Query.start_at"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.firestore_v1beta1.query.Query.start_at" title="Permalink to this definition">#</a></dt>
<dd><p>Start query results at a particular document value.</p>
<p>The result set will <strong>include</strong> the document specified by
<code class="docutils literal notranslate"><span class="pre">document_fields</span></code>.</p>
<p>If the current query already has specified a start cursor – either
via this method or
<a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query.start_after" title="google.cloud.firestore_v1beta1.query.Query.start_after"><code class="xref py py-meth docutils literal notranslate"><span class="pre">start_after()</span></code></a> – this will
overwrite it.</p>
<p>When the query is sent to the server, the <code class="docutils literal notranslate"><span class="pre">document_fields</span></code> will
be used in the order given by fields set by
<a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query.order_by" title="google.cloud.firestore_v1beta1.query.Query.order_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">order_by()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>document_fields</strong> (<em>Union</em><em>[</em><em>DocumentSnapshot</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a><em>]</em>) – a document
snapshot or a dictionary/list/tuple of fields representing a
query results cursor. A cursor is a collection of values that
represent a position in a query result set.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A query with cursor. Acts as
a copy of the current query, modified with the newly added
“start at” cursor.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Query</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.firestore_v1beta1.query.Query.where">
<code class="descname">where</code><span class="sig-paren">(</span><em>field_path</em>, <em>op_string</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/cloud/firestore_v1beta1/query.html#Query.where"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.firestore_v1beta1.query.Query.where" title="Permalink to this definition">#</a></dt>
<dd><p>Filter the query on a field.</p>
<p>See <a class="reference internal" href="client.html#google.cloud.firestore_v1beta1.client.Client.field_path" title="google.cloud.firestore_v1beta1.client.Client.field_path"><code class="xref py py-meth docutils literal notranslate"><span class="pre">field_path()</span></code></a> for
more information on <strong>field paths</strong>.</p>
<p>Returns a new <a class="reference internal" href="#google.cloud.firestore_v1beta1.query.Query" title="google.cloud.firestore_v1beta1.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> that
filters on a specific field path, according to an operation (e.g.
<code class="docutils literal notranslate"><span class="pre">==</span></code> or “equals”) and a particular value to be paired with that
operation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>field_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – A field path (<code class="docutils literal notranslate"><span class="pre">.</span></code>-delimited list of
field names) for the field to filter on.</li>
<li><strong>op_string</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – A comparison operation in the form of a string.
Acceptable values are <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>
and <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>.</li>
<li><strong>value</strong> (<a class="reference internal" href="../asset/gapic/v1beta1/types.html#google.cloud.asset_v1beta1.types.Any" title="google.cloud.asset_v1beta1.types.Any"><em>Any</em></a>) – The value to compare the field against in the filter.
If <code class="docutils literal notranslate"><span class="pre">value</span></code> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> or a NaN, then <code class="docutils literal notranslate"><span class="pre">==</span></code> is the only
allowed operation.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A filtered query. Acts as a
copy of the current query, modified with the newly added filter.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">Query</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – If <code class="docutils literal notranslate"><span class="pre">field_path</span></code> is invalid.</li>
<li><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – If <code class="docutils literal notranslate"><span class="pre">value</span></code> is a NaN or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> and
<code class="docutils literal notranslate"><span class="pre">op_string</span></code> is not <code class="docutils literal notranslate"><span class="pre">==</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">google-cloud</a></h1>



<p class="blurb">Google Cloud Client Libraries for Python</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=GoogleCloudPlatform&repo=google-cloud-python&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../core/index.html">Core Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../asset/index.html">Asset Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../automl/index.html">AutoML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bigquery/index.html">BigQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bigquery_datatransfer/index.html">BigQuery Data-Transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bigtable/index.html">Bigtable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../container/index.html">Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dataproc/index.html">Dataproc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datastore/index.html">Datastore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dlp/index.html">Data Loss Prevention</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dns/index.html">DNS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Firestore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iam/index.html">IAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iot/index.html">IoT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kms/index.html">Key Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/index.html">Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pubsub/index.html">PubSub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oslogin/index.html">OSLogin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../redis/index.html">Redis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resource-manager/index.html">Resource Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../runtimeconfig/index.html">Python Client for Google Cloud RuntimeConfig</a></li>
<li class="toctree-l1"><a class="reference internal" href="../runtimeconfig/index.html#api-reference">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduler/index.html">Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../securitycenter/index.html">Security Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../websecurityscanner/index.html">Security Scanner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spanner/index.html">Spanner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../speech/index.html">Speech</a></li>
<li class="toctree-l1"><a class="reference internal" href="../storage/index.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tasks/index.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../texttospeech/index.html">Text-to-Speech</a></li>
<li class="toctree-l1"><a class="reference internal" href="../translate/index.html">Translate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vision/index.html">Vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videointelligence/index.html">Video Intelligence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../error-reporting/index.html">Stackdriver Error Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logging/index.html">Stackdriver Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring/index.html">Stackdriver Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Stackdriver Trace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Release History</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Python Client for Google Cloud Firestore</a><ul>
      <li>Previous: <a href="field_path.html" title="previous chapter">Field Paths</a></li>
      <li>Next: <a href="batch.html" title="next chapter">Batches</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014-2017, Google.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/firestore/query.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/GoogleCloudPlatform/google-cloud-python" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>